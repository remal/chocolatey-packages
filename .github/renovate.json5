{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["github>remal/renovate-config:global"],

  "git-submodules": {
    enabled: false, // This is in beta for now, so let's use Dependabot to update Git submodules
  },

  packageRules: [
    {
      matchDatasources: ["nuget"],
      registryUrls: [
        "https://community.chocolatey.org/api/v2/",
        "https://f.feedz.io/remal/chocolatey-packages/nuget",
      ]
    }
  ],

  regexManagers: [
    {
      fileMatch: ['\\.nuspec$'],
      matchStrings: ["<dependency\\s+id=\"(?<depName>[^\"]+)\"\\s+version=\"(?<currentValue>[^\"]+)\"\\s*/>"],
      datasourceTemplate: "nuget",
    },
    {
      fileMatch: ['\\.nuspec$'],
      matchStrings: ["<!--\\s*NPP Plugin:\\s*(?<depName>[^:#>]+):(?<currentValue>[^#]+?)\\s*-->"],
      versioningTemplate: "semver-coerced",
      datasourceTemplate: "custom.npp-plugin",
    },
  ],

  customDatasources: {
    'npp-plugin': {
      defaultRegistryUrlTemplate: 'https://github.com/notepad-plus-plus/nppPluginList/raw/master/src/pl.x64.json',
      format: 'json',
      transformTemplates: ["{ 'releases': [ { 'version': $string(`npp-plugins`.$[`folder-name` = '{{packageName}}'].version) } ] }"],
    },
  },
}
